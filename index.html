<html>
<head>
	<meta name="viewport"
          content="width=device-width,initial-scale=1.0">

	<style type="text/css">

body {background-color: black}
body {color:white}
img 
{
width: 50%
height: 50%
}
</style>
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script type="text/javascript">

    function show()
    {
	if(!($('#textId').val()=='')){
        	var oText=document.getElementById("textId");
        	var oP =document.createElement("p");
		stock = oText.value.toLowerCase();
		stockurl = baseurl+stock;
		//在页面下方,添加,显示调试变量
        	//oP.innerHTML=stockurl;
        	//document.body.appendChild(oP);
	}	
    }
	
function voice(str){
	var url = "http://tts.baidu.com/text2audio?lan=zh&ie=UTF-8&spd=5&text=" + encodeURI(str);
	var n = new Audio(url);
	n.src = url;
	n.play();
}
function readart(){
	//bm=document.getElementById('art_main').innerHTML;
	//bm=bm.replace(/<[^>]*>|/g,"");
	bm="current price:"+elements[3];
	voice(bm);
}


$(document).ready(function(){
	$(function () {
		setInterval(function () {
			parseDataM();
		},10000);
	})
});
	
//sina api的基础URL
var baseurl = "http://hq.sinajs.cn/list=";
var stock = "sh600999"
var stockurl = "http://hq.sinajs.cn/list=sh600999"
//获取api并播报语音
function parseDataM(){
	$.ajax({
	url:stockurl,
	dataType:"script",
	cache:"false",
	type:"GET",
	success:function(a){
		
		var v_ = 'hq_str_' + stock; //拼接变量名
		gp1=eval( v_).split(",");
		document.getElementById("info_a1").innerHTML = gp1[0];
		document.getElementById("info_a2").innerHTML = gp1[1];
		document.getElementById("info_a3").innerHTML = gp1[4];
		document.getElementById("info_a4").innerHTML = gp1[5];
		document.getElementById("info_a5").innerHTML = gp1[3];
	
		
		voice(gp1[3]);
		}
	});
}
</script>
</head>
<body>
<div class="main">
	<input type="text" value="sh600999" id="textId" height=200%>
	<input type="button" id="btn" value="ok" onclick="show()" height=200%>
  <ul>
    <li>【<span id="info_a1"></span>】</li>
    <li><label>开盘：</label><span id="info_a2"></span></li>
    <li><label>最高：</label><span id="info_a3"></span></li>
    <li><label>最低：</label><span id="info_a4"></span></li>
    <li><label>当前：</label><span id="info_a5"></span></li>
  </ul>
</div>
	
<script>
parseDataM();
</script>
	
<li>给报价员加鸡腿,豪横板一个,涨起涨起！</li>
<li>长按下图，识别二维码,豪横赏一个,涨起涨起！</li>
<img src="./ds.jpg" />
</body>
</html>
